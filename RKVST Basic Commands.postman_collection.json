{
	"info": {
		"_postman_id": "80d50d76-3a69-4c9a-ba06-d24a3c7663dd",
		"name": "RKVST Basic Commands",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
		"_exporter_id": "26875712",
		"_collection_link": "https://www.postman.com/rkvst-official/workspace/rkvst-public-official/collection/14798299-80d50d76-3a69-4c9a-ba06-d24a3c7663dd?action=share&creator=26875712&source=collection_link"
	},
	"item": [
		{
			"name": "Create a Document profile (hash only) Asset",
			"request": {
				"method": "POST",
				"header": [],
				"body": {
					"mode": "raw",
					"raw": "{\n    \"attributes\": {\n        \"arc_description\":\"Test document for Postman collection \",\n        \"arc_display_type\":\"Marketing glossy\",\n        \"arc_display_name\":\"Postman Test\",\n        \"arc_profile\":\"Document\",\n        \"document_hash_value\":\"799b43963ee9458e98adfeee3a5db9458a1a70419b4da2ad2b030d463dc67408\",\n        \"document_hash_alg\":\"sha256\",\n        \"document_version\":\"1\",\n        \"document_status\":\"Published\",\n        \"some_custom_attribute\":\"anything you like\"\n    },\n    \"chain_id\":\"\",\n    \"behaviours\": [\n        \"Builtin\",\n        \"RecordEvidence\"\n    ],\n    \"proof_mechanism\":\"SIMPLE_HASH\"\n}",
					"options": {
						"raw": {
							"language": "json"
						}
					}
				},
				"url": {
					"raw": "https://app.rkvst.io/archivist/v2/assets",
					"protocol": "https",
					"host": [
						"app",
						"rkvst",
						"io"
					],
					"path": [
						"archivist",
						"v2",
						"assets"
					]
				}
			},
			"response": []
		},
		{
			"name": "Publish a new version of a Document profile (hash only) Asset",
			"request": {
				"method": "POST",
				"header": [],
				"body": {
					"mode": "raw",
					"raw": "{\n    \"behaviour\": \"RecordEvidence\",\n    \"operation\": \"Record\",\n    \"asset_attributes\": {\n        \"document_hash_value\":\"799b43963ee9458e98adfeee3a5db9458a1a70419b4da2ad2b030d463dc67408\",\n        \"document_hash_alg\":\"sha256\",\n        \"document_version\":\"2\"\n    },\n    \"event_attributes\": {\n        \"arc_description\":\"Publish version 2 of test document\",\n        \"arc_display_type\":\"publish\",\n                \"document_version_authors\": [\n            {\n                \"display_name\": \"Zippy\",\n                \"email\": \"zippy@rainbow.tv\"\n            },\n            {\n                \"display_name\": \"Bungle\",\n                \"email\": \"bungle@rainbow.tv\"\n            }\n        ]\n    }\n}",
					"options": {
						"raw": {
							"language": "json"
						}
					}
				},
				"url": {
					"raw": "https://app.rkvst.io/archivist/v2/assets/{{publish_version_asset_uuid}}/events",
					"protocol": "https",
					"host": [
						"app",
						"rkvst",
						"io"
					],
					"path": [
						"archivist",
						"v2",
						"assets",
						"{{publish_version_asset_uuid}}",
						"events"
					]
				}
			},
			"response": []
		},
		{
			"name": "LIST all Assets in Tenancy",
			"request": {
				"method": "GET",
				"header": [],
				"url": {
					"raw": "https://app.rkvst.io/archivist/v2/assets",
					"protocol": "https",
					"host": [
						"app",
						"rkvst",
						"io"
					],
					"path": [
						"archivist",
						"v2",
						"assets"
					]
				}
			},
			"response": []
		},
		{
			"name": "Find your untracked Assets",
			"request": {
				"method": "GET",
				"header": [],
				"url": {
					"raw": "https://app.rkvst.io/archivist/v2/assets?tracked=NOT_TRACKED",
					"protocol": "https",
					"host": [
						"app",
						"rkvst",
						"io"
					],
					"path": [
						"archivist",
						"v2",
						"assets"
					],
					"query": [
						{
							"key": "tracked",
							"value": "NOT_TRACKED"
						}
					]
				}
			},
			"response": []
		},
		{
			"name": "LIST all Events in Tenancy",
			"request": {
				"method": "GET",
				"header": [],
				"url": {
					"raw": "https://app.rkvst.io/archivist/v2/assets/-/events",
					"protocol": "https",
					"host": [
						"app",
						"rkvst",
						"io"
					],
					"path": [
						"archivist",
						"v2",
						"assets",
						"-",
						"events"
					]
				}
			},
			"response": []
		},
		{
			"name": "LIST all Events for an Asset",
			"request": {
				"method": "GET",
				"header": [],
				"url": {
					"raw": "https://app.rkvst.io/archivist/v2/assets/{{list_events_asset_uuid}}/events",
					"protocol": "https",
					"host": [
						"app",
						"rkvst",
						"io"
					],
					"path": [
						"archivist",
						"v2",
						"assets",
						"{{list_events_asset_uuid}}",
						"events"
					]
				}
			},
			"response": []
		},
		{
			"name": "LIST all Events in Tenancy in a given timeframe",
			"request": {
				"method": "GET",
				"header": [],
				"url": {
					"raw": "https://app.rkvst.io/archivist/v2/assets/-/events?timestamp_accepted_since=2023-01-01T00:00:00Z&timestamp_accepted_before=2023-02-01T00:00:00Z",
					"protocol": "https",
					"host": [
						"app",
						"rkvst",
						"io"
					],
					"path": [
						"archivist",
						"v2",
						"assets",
						"-",
						"events"
					],
					"query": [
						{
							"key": "timestamp_accepted_since",
							"value": "2023-01-01T00:00:00Z",
							"description": "LIST all Events after this time..."
						},
						{
							"key": "timestamp_accepted_before",
							"value": "2023-02-01T00:00:00Z",
							"description": "...and before this time"
						}
					]
				}
			},
			"response": []
		},
		{
			"name": "GET state of an Asset at a historical point in time",
			"request": {
				"method": "GET",
				"header": [],
				"url": {
					"raw": "https://app.rkvst.io/archivist/v2/assets/{{historical_asset_uuid}}?at_time=2023-04-07T19:30:00Z",
					"protocol": "https",
					"host": [
						"app",
						"rkvst",
						"io"
					],
					"path": [
						"archivist",
						"v2",
						"assets",
						"{{historical_asset_uuid}}"
					],
					"query": [
						{
							"key": "at_time",
							"value": "2023-04-07T19:30:00Z"
						}
					]
				}
			},
			"response": []
		},
		{
			"name": "Untrack an Asset",
			"request": {
				"method": "POST",
				"header": [],
				"body": {
					"mode": "raw",
					"raw": "{\n  \"operation\": \"StopTracking\",\n  \"behaviour\": \"Builtin\"\n}",
					"options": {
						"raw": {
							"language": "json"
						}
					}
				},
				"url": {
					"raw": "https://app.rkvst.io/archivist/v2/assets/{{untrack_asset_uuid}}/events",
					"protocol": "https",
					"host": [
						"app",
						"rkvst",
						"io"
					],
					"path": [
						"archivist",
						"v2",
						"assets",
						"{{untrack_asset_uuid}}",
						"events"
					]
				}
			},
			"response": []
		}
	],
	"auth": {
		"type": "bearer",
		"bearer": [
			{
				"key": "token",
				"value": "{{RKVST_BEARERTOKEN}}",
				"type": "string"
			}
		]
	},
	"event": [
		{
			"listen": "prerequest",
			"script": {
				"type": "text/javascript",
				"exec": [
					"pm.sendRequest({",
					"    url: \"https://app.rkvst.io/archivist/iam/v1/appidp/token\",",
					"    method: 'POST',",
					"    header: {",
					"        'Accept': 'application/json',",
					"        'Content-Type': 'application/x-www-form-urlencoded'",
					"    },",
					"    body: {",
					"        mode: 'urlencoded',",
					"        urlencoded: [",
					"            {key: 'grant_type', value: 'client_credentials'},",
					"            {key: 'client_id', value: pm.variables.get('rkvst_client_id')},",
					"            {key: 'client_secret', value: pm.variables.get('rkvst_client_secret')}",
					"        ]",
					"    }",
					"},",
					"    (err, res) => {",
					"        console.log(res.json());",
					"        pm.globals.set(\"RKVST_BEARERTOKEN\", res.json().access_token)",
					"        console.log(pm.globals.get(\"RKVST_BEARERTOKEN\"));",
					"});"
				]
			}
		},
		{
			"listen": "test",
			"script": {
				"type": "text/javascript",
				"exec": [
					""
				]
			}
		}
	],
	"variable": [
		{
			"key": "rkvst_client_id",
			"value": "",
			"type": "string"
		},
		{
			"key": "rkvst_client_secret",
			"value": "",
			"type": "string"
		},
		{
			"key": "untrack_asset_uuid",
			"value": "",
			"type": "string"
		},
		{
			"key": "list_events_asset_uuid",
			"value": "",
			"type": "string"
		},
		{
			"key": "publish_version_asset_uuid",
			"value": "",
			"type": "string"
		},
		{
			"key": "historical_asset_uuid",
			"value": "",
			"type": "string"
		}
	]
}